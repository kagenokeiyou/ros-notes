# 主题（Topic）

主题是 ROS 2 提供的三种主要接口类型之一。主题应该用于连续数据流，例如传感器数据、机器人状态等。

如前所述，ROS 2 是一个强类型、匿名的发布/订阅系统。让我们分解这句话并稍作解释。

## 发布/订阅（Publish/Subscribe）

发布/订阅系统是一种包含数据生产者（发布者）和数据消费者（订阅者）的系统。发布者和订阅者通过“主题”这一概念相互联系，主题是一个通用名称，以便实体能够找到彼此。例如，当你创建一个发布者时，你必须为其指定一个字符串作为主题名称；订阅者也是如此。任何位于同一主题名称下的发布者和订阅者都可以直接相互通信。在任何特定主题上，可能有零个或多个发布者，以及零个或多个订阅者。当任何发布者向主题发布数据时，系统中的所有订阅者都会收到该数据。该系统也被称为“总线”，因为它在一定程度上类似于电气工程中的设备总线。这种总线概念是使 ROS 2 成为一个强大且灵活系统的部分原因。发布者和订阅者可以根据需要随时出现或消失，这意味着调试和内省是系统的自然扩展。例如，如果你想记录数据，可以使用 `ros2 bag record` 命令。 在底层， `ros2 bag record` 会为你指定的任何主题创建一个新的订阅者。不中断数据流向系统的其他部分。

## 匿名

引言中提到的另一个事实是 ROS 2 是“匿名的”。这意味着当订阅者接收到数据时，它通常不知道或不关心哪个发布者最初发送了它（尽管如果需要，它可以找到答案）。这种架构的好处是发布者和订阅者可以随意更换，而不会影响系统的其他部分。

## 强类型

最后，引言中还提到发布/订阅系统是“强类型的”。在这个上下文中，它有两个含义：

1. ROS 消息中每个字段的类型都是强类型的，并且这种类型在多个层次上得到强制执行。例如，如果 ROS 消息包含：

```rosmsg
uint32 field1
string field2
```

那么代码将确保 `field1` 始终是无符号整数，而 `field2` 始终是字符串。

2. 每个字段的语义都很明确。虽然没有自动机制来确保这一点，但所有核心 ROS 类型都与强语义相关联。例如，IMU 消息包含一个用于测量角速度的三维向量，并且每个维度都指定为弧度/秒。不应将其他解释放入消息中。
